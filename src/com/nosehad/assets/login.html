<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/images/bulma.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <meta charset="UTF-8">
    <title>NVPN - Login</title>
</head>
<body>
<div class="container" style="padding-top: 7%; padding-left: 5%; padding-right: 5%;">
    <h2 class="title is-2" style="padding-top: 2%;"><strong style="
    background-image: linear-gradient(45deg, #a344a6, #4b4bd0);
   -webkit-background-clip: text;
   -webkit-text-fill-color: transparent;
   -moz-background-clip: text;
   -moz-text-fill-color: transparent;">Welcome</strong> Back!</h2>
<form class="box" style="padding-top: 2%;">
    <div style="text-align: right;">
    </div>
    <div class="field">
        <label class="label">Email</label>
        <div class="control">
            <input id="email" class="input" type="email" placeholder="e.g. contact@nosehad.com">
        </div>
    </div>

    <div class="field">
        <label class="label">Password</label>
        <div class="control">
            <input id="passwd" class="input" type="password" placeholder="********">
        </div>
    </div>
    <div class="columns">
        <div class="column is-one-fifth" style="width: 180px;">
            <a id="L" class="button is-light" style="display: inline-block;">Forgot Password?</a>
        </div>
        <div class="column is-one-fifth" style="width: 180px;">
            <a id="go" class="button" style="
    background-image: linear-gradient(45deg, #a344a6, #4b4bd0);
   -webkit-background-clip: text;
   -webkit-text-fill-color: transparent;
   -moz-background-clip: text;
   -moz-text-fill-color: transparent;">Login</a>
        </div>
        <div class="column is-one-fifth">
            <div id="res" style="padding-top: 4%;">
            </div>
        </div>
    </div>    
    <br>
</form>
<div id="banned" class="container", style="text-align: left;"></div>
</div>
<script type="text/javascript">
    function clear_bnd() {
        document.getElementById('banned').innerHTML = ''
    } 

    document.getElementById('go').addEventListener('click', function () {
      if(!(document.getElementById('email').value.includes('/') || document.getElementById('passwd').value.includes('/'))) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", "/l/do=" + document.getElementById("email").value + "&&" + document.getElementById("passwd").value, false ); 
        xmlHttp.send( null );
        if(xmlHttp.responseText == 'failure') {
          document.getElementById('res').innerHTML = "<span class=\"tag is-danger is-light\" style=\"padding-top: 1%; text-align: left;\">Email or Password are wrong.</span>";
          return;
        }
        else if(xmlHttp.responseText == 'alr') {
          document.getElementById('res').innerHTML = "<span class=\"tag is-danger is-success\" style=\"padding-top: 1%; text-align: left;\">You are already logged in to an account.</span>";
          return;
        }
        else if(xmlHttp.responseText == 'banned') {
          document.getElementById('banned').innerHTML = '        <article class="message is-danger">\
  <div class="message-header">\
    <p>Security Ban.</p>\
    <button class="delete" aria-label="delete" onclick="clear_bnd()"></button>\
  </div>\
  <div class="message-body">\
    Our Bot protection has permanently banned your ip from this platform.<br>\
    Please contact contact@nosehad.com if you believe, this is an error.\
  </div>\
</article>';
        }
        else if (xmlHttp.responseText == 'done') {
          window.location.replace("/home");
        }
      } else {
        document.getElementById('res').innerHTML = "<span class=\"tag is-danger is-light\" style=\"padding-top: 1%; text-align: left;\">Email or Password are wrong.</span>";
      }
    })
  </script>
</body>
</html>